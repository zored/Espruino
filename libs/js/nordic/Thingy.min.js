var k=V8,v=D6,l=V9,m=D25,n=D26,p=V10,q=V11,w=V12,x=D22,r=[V13,V14,V15],t=D23,y=D24,z=D17,A=D28,u=V4,d=D27,f=D29,c=new I2C;c.setup({sda:7,scl:8,bitrate:4E5});exports.I2C=c;var e=new I2C;e.setup({sda:14,scl:15,bitrate:4E5});exports.I2CE=e;exports.onAcceleration=function(a){a?(this.accel||(this.accel=require("LIS2DH12").connectI2C(e)),this.accel.callback=a,this.accel.setPowerMode("low")):(this.accel&&this.accel.setPowerMode("powerdown"),this.accel=void 0)};exports.getAcceleration=function(a){this.accel?
this.accel.readXYZ(a):require("LIS2DH12").connectI2C(e).readXYZ(a)};exports.onMPU=function(a){a?this.mpu?this.mpu.callback=a:(k.set(),this.mpu=require("MPU9250").connectI2C(c),this.mpu.samplerate=10,this.mpu.callback=a,this.mpu.watch=setWatch(function(){this.mpu.callback(this.mpu.read())}.bind(this),v,{repeat:1,edge:"rising"}),setTimeout(this.mpu.initMPU9250.bind(this.mpu),10)):(this.mpu&&clearWatch(this.mpu.watch),k.reset(),this.mpu=void 0)};exports.getMPU=function(a){if(this.mpu)a(this.mpu.read());
else this.onMPU(function(b){this.onMPU();a(b)}.bind(this))};exports.onPressure=function(a){a?(this.pressure||(this.pressure=require("LPS22HB").connectI2C(c,{"int":t}),this.pressure.on("data",function(a){this.pressureCallback(a)}.bind(this))),this.pressureCallback=a):(this.pressure&&this.pressure.stop(),this.pressureCallback=this.pressure=void 0)};exports.getPressure=function(a){if(this.pressure)this.pressure.read(a);else{var b=require("LPS22HB").connectI2C(c,{"int":t});b.read(function(c){b.stop();
a(c)})}};exports.onHumidity=function(a){a?(this.humidity||(this.humidity=require("HTS221").connect(c,{"int":y}),this.humidity.on("data",function(a){this.humidityCallback(a)}.bind(this))),this.humidityCallback=a):(this.humidity&&this.humidity.stop(),this.humidityCallback=this.humidity=void 0)};exports.getHumidity=function(a){if(this.humidity)this.humidity.read(a);else this.onHumidity(function(b){this.onHumidity();a(b)}.bind(this))};exports.onGas=function(a){a?(this.gas||(p.set(),q.set(),w.reset(),
this.gas=require("CCS811").connectI2C(c,{"int":x}),this.gas.on("data",function(a){this.gasCallback(a)}.bind(this))),this.gasCallback=a):(this.gas&&(this.gas.stop(),q.reset(),p.reset()),this.gasCallback=this.gas=void 0)};exports.getGas=function(a){if(this.gas)a(this.gas.get());else this.onGas(function(b){this.onGas();a(b)}.bind(this))};exports.onColor=function(a){a?(this.color||(digitalWrite(r,0),this.color=require("BH1745").connectI2C(c),this.colorInt=setInterval(function(){this.colorCallback(this.color.read())}.bind(this),
200)),this.colorCallback=a):(this.color&&(clearInterval(this.colorInt),this.color.stop(),digitalWrite(r,7)),this.colorCallback=this.colorInt=this.color=void 0)};exports.getColor=function(a){if(this.color)a(this.color.read());else this.onColor(function(b){this.onColor();a(b)}.bind(this))};exports.getBattery=function(a){u.set();var b={charging:z.read(),voltage:E.getAnalogVRef()*analogRead(A)*1500/180};u.reset();a&&a(b);return b};exports.sound=function(a,b,c){this.sounds||(this.sounds=0);if(2<this.sounds)throw Error("Too many sounds playing at once");
var g=new Waveform(a.length);g.buffer.set(a);g.on("finish",function(a){this.sounds--;this.sounds||(f.reset(),digitalWrite(d,0));c&&c()}.bind(this));this.sounds||(analogWrite(d,.5,{freq:4E4}),f.set());this.sounds++;g.startOutput(d,b)};exports.beep=function(a,b){b=0<b?b:250;analogWrite(d,.5,{freq:0<a?a:500});f.set();this.beepTimeout&&clearTimeout(this.beepTimeout);this.beepTimeout=setTimeout(function(){delete this.beepTimeout;f.reset();digitalWrite(d,0)}.bind(this),b)};exports.record=function(a,b){function c(){clearInterval(k);
poke8(1073860612,1);poke8(1073861888,0);poke32(1073861952,4294967295);poke32(1073861956,4294967295);l.reset();E.mapInPlace(h,h,function(a){return a+128});b&&setTimeout(b,0,h)}var g=new ArrayBuffer(2049),d=E.getAddressOf(g,!0);if(!d)throw Error("Unable to create a buffer");var h=new Uint8Array(a),f=0,e=0;l.set();n.mode("output");m.mode("input");poke32(1073861892,138412032);poke32(1073861896,1);poke32(1073861912,72);poke32(1073861916,72);poke32(1073861952,n.getInfo().num);poke32(1073861956,m.getInfo().num);
poke32(1073861984,d);poke32(1073861988,512);poke32(1073861888,1);poke8(1073860864,0);poke8(1073860868,0);poke8(1073860872,0);poke8(1073860608,1);poke32(1073861984,d+1024);var k=setInterval(function(){peek8(1073860872)&&(poke8(1073860872,0),poke32(1073861984,d+1024*e),h.set(new Uint32Array(g,1+1024*e,256),f),e=1-e,f+=256,f>=h.length&&c())},5);return h};E.on("init",function(){if(exports.accel&&exports.accel.callback){var a=exports.accel.callback;exports.accel=void 0;exports.onAcceleration(a)}exports.pressureCallback&&
(exports.pressure=void 0,exports.onPressure(exports.pressureCallback));exports.humidityCallback&&(exports.humidity=void 0,exports.onHumidity(exports.humidityCallback));exports.gasCallback&&(exports.gas=void 0,exports.onGas(exports.gasCallback));exports.colorCallback&&(exports.color=void 0,exports.onColor(exports.colorCallback))})